!function(d,u){d.fn.yith_wcet_popup=function(s){var e=null;self.popup=d(this);var p={popup_class:"yith-wcet-popup",overlay_class:"yith-wcet-overlay",close_btn_class:"yith-wcet-popup-close",position:"center",popup_delay:0,ajax:!(self.opts={}),ajax_container:"yith-wcet-popup-ajax-container",url:"",ajax_data:{},ajax_complete:function(){},ajax_success:function(){},popup_css:{},responsive_controls:!1,loader:'<span class="yith-wcet-popup-loader dashicons dashicons-image-filter"></span>'};self.init=function(){self.opts=d.extend({},p,s),"close"!==s?(self.opts.responsive_controls&&(self.opts.popup_class+=" responsive-controls-enabled"),o(),1==self.opts.ajax?l():(self.popup=self.popup.clone(),self.popup.css(self.opts.popup_css).addClass("yith-wcet-popup-opened"),d(u.body).append(self.popup)),t(),a(),i()):f()};var o=function(){0<d(u).find("."+self.opts.overlay_class).length?e=d(u).find("."+self.opts.overlay_class).first():(e=d("<div />").addClass(self.opts.overlay_class),d(u.body).append(e))},l=function(){var s,e,p,o;self.popup=d("<div />").addClass(self.opts.popup_class),self.opts.responsive_controls&&(s=d('<div class="responsive-controls-wrapper"></div>'),e=d('<button class="preview-desktop active"></button>'),p=d('<button class="preview-tablet"></button>'),o=d('<button class="preview-mobile"></button>'),s.append(e),s.append(p),s.append(o));var l=d("<span />").addClass(self.opts.close_btn_class+" dashicons dashicons-no-alt"),t=d("<div />").addClass(self.opts.ajax_container);t.html(self.opts.loader),self.popup.append(t),d.ajax({method:"POST",data:self.opts.ajax_data,url:self.opts.url,success:function(s){self.popup.find("."+self.opts.ajax_container).html(s),c(),self.opts.ajax_success()},complete:function(){self.popup.append(l.hide().delay(500).fadeIn()),self.opts.responsive_controls&&self.popup.append(s.hide().delay(500).fadeIn()),self.opts.ajax_complete()}}),d(u.body).append(popup)},t=function(){self.popup.css({position:"fixed",top:"45%",left:"45%",width:"5%",height:"5%"})},a=function(){d(u).on("click","."+self.opts.overlay_class,f),self.popup.on("click","."+self.opts.close_btn_class,f),self.popup.on("click",".responsive-controls-wrapper button",n),d(u).on("keydown",function(s){27===s.keyCode&&f()})},n=function(s){var e=d(s.target);self.popup.find(".responsive-controls-wrapper button").removeClass("active"),e.addClass("active"),self.popup.removeClass("preview-desktop"),self.popup.removeClass("preview-tablet"),self.popup.removeClass("preview-mobile"),e.is(".preview-desktop")?self.popup.addClass("preview-desktop"):e.is(".preview-tablet")?self.popup.addClass("preview-tablet"):e.is(".preview-mobile")&&self.popup.addClass("preview-mobile")},i=function(){e.fadeIn("fast"),self.popup.fadeIn("fast",function(){self.opts.ajax||c()})},c=function(){self.popup.children().hide(),self.popup.show(),self.popup.css({opacity:1,width:"90%",height:"90%"}),setTimeout(function(){self.popup.children().fadeIn("fast")},500)},f=function(){d(u).find("."+self.opts.overlay_class).hide(),self.popup.hide(),self.popup.remove()};return self.init(),self.popup}}(jQuery,(window,document));